@model PagedList.IPagedList<pet_web_shop.Models.EF.tb_post>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/MainLayout.cshtml";
}

<!DOCTYPE html>

<html>
<body>
    <div class="container-fluid py-5">
        <div class="container">
            @if (Model != null && Model.Any())
            {
                <div class="border-start border-5 border-primary ps-5 mb-5" style="max-width: 600px;">
                    <h6 class="text-primary text-uppercase">Blog</h6>
                    <h1 class="display-5 text-uppercase mb-0">Đón đọc những bài viết vô cùng hấp dẫn</h1>
                </div>

                <div class="row g-5">
                    @foreach (var post in Model)
                    {
                        var image = "data:image/png;base64," + Convert.ToBase64String(post.image);

                        <div class="col-lg-6">
                            <div class="blog-item">
                                <div class="row g-0 bg-light overflow-hidden">
                                    <div class="col-12 col-sm-5 h-100">
                                        <img class="img-fluid h-100" src="@image" style="object-fit: cover;">
                                    </div>
                                    <div class="col-12 col-sm-7 h-100 d-flex flex-column justify-content-center">
                                        <div class="p-4">
                                            <div class="d-flex mb-3">
                                                <small><i class="bi bi-calendar-date me-2"></i>@post.created.ToString("dd MMM, yyyy HH:mm")</small>
                                            </div>
                                            <p><small class=" text-one-line"><i class="bi bi-person me-2"></i>@post.user.first_name @post.user.last_name</small></p>
                                            <h5 class="text-uppercase mb-3 text-two-line">@post.title</h5>
                                            <p class="text-three-line">@post.sub_title</p>
                                            <a class="text-primary text-uppercase" href="/bai-viet/@post.id">Đọc thêm<i class="bi bi-chevron-right"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
            else
            {
                <div class="col-lg-12 d-flex justify-content-center align-items-center">
                    <h1>Không có bài viết nào!</h1>
                </div>
            }


            <div class="row mt-4">
                <div class="col-sm-12 col-md-5">
                    <div class="dataTables_info" role="status" aria-live="polite">Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount</div>
                </div>
                <div class="col-sm-12 col-md-7">
                    <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">

                        @Html.PagedListPager(Model, page => Url.Action("Index",
                             new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }),
                             new PagedListRenderOptions
                             {
                                 LinkToPreviousPageFormat = "Previous",
                                 LinkToNextPageFormat = "Next",
                                 MaximumPageNumbersToDisplay = 5,
                                 ClassToApplyToFirstListItemInPager = "previous",
                                 ClassToApplyToLastListItemInPager = "next",
                                 LiElementClasses = new string[] { "paginate_button", "page-item" },
                             })
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Bootstrap core JavaScript-->
    <script src="~/Content/vendor/jquery/jquery.min.js"></script>
    <script src="~/Content/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="~/Content/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="~/Content/js/admin/common.js"></script>
</body>
</html>
