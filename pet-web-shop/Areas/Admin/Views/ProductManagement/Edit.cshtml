@model pet_web_shop.Models.EF.tb_product

@{
    ViewBag.Title = "Edit Product";
    Layout = "~/Areas/Admin/Views/Shared/AdminLayout.cshtml";
}

<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">


    <!-- Favicon -->
    <link href="~/Content/img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&family=Roboto:wght@700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="~/Content/lib/flaticon/font/flaticon.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="~/Content/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="~/Content/css/style.css" rel="stylesheet">
</head>

<body>
    <h2>Cập nhật sản phẩm</h2>

    @using (Html.BeginForm("Edit", "ProductManagement", FormMethod.Post, new { }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(x => x.id)
        @Html.HiddenFor(x => x.created)
        <div class="form-horizontal">
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="col-md-10">
                <div class="card" id="cardProduct" data-action="edit">
                    <div class="card-header p-2">
                        <ul class="nav nav-pills">
                            <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#detailProduct">Thông tin chung</a></li>
                            <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#productImage">Hình ảnh</a></li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <div class="active tab-pane" id="detailProduct">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.title, "Tiêu đề", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextBoxFor(model => model.title, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.title, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.category_id, "Danh mục", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.DropDownListFor(model => model.category_id, ViewBag.ListCategory as SelectList, "Chọn danh mục", new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.category_id, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.description, "Mô tả chi tiết", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextAreaFor(model => model.description, new { @class = "form-control", @id = "textDescription" })
                                        @Html.ValidationMessageFor(model => model.description, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.price, "Giá", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextBoxFor(model => model.price, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.price, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.sale, "Giảm giá (%)", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextBoxFor(model => model.sale, new { @class = "form-control", @min = 0, @max = 100, @type = "number" })
                                        @Html.ValidationMessageFor(model => model.sale, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.quantity, "Số lượng", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextBoxFor(model => model.quantity, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.quantity, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.detail, "Mô tả ngắn", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12">
                                        @Html.TextBoxFor(model => model.detail, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.detail, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.status, "Trạng thái", new { @class = "control-label col-md-2" })
                                    <div class="col-md-12 flex-row d-flex">
                                        <div class="form-check">
                                            @Html.RadioButtonFor(model => model.status, 1, new { @class = "form-check-input", @checked = "checked" })
                                            @Html.Label("Active", new { @class = "form-check-label mr-5", @for = "status" })
                                        </div>
                                        <div class="form-check">
                                            @Html.RadioButtonFor(model => model.status, 0, new { @class = "form-check-input" })
                                            @Html.Label("Inactive", new { @class = "form-check-label", @for = "status" })
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 row">
                                    <div class="form-group col-md-3">
                                        <div class="form-check">
                                            @Html.CheckBoxFor(model => model.isHot, new { @class = "form-check-input" })
                                            @Html.LabelFor(model => model.isHot, "Sản phẩm HOT", new { @class = "control-label" })
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <div class="form-check">
                                            @Html.CheckBoxFor(model => model.isSale, new { @class = "form-check-input" })
                                            @Html.LabelFor(model => model.isSale, "Sản phẩm SALE", new { @class = "control-label" })
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <div class="form-check">
                                            @Html.CheckBoxFor(model => model.isNew, new { @class = "form-check-input" })
                                            @Html.LabelFor(model => model.isNew, "Sản phẩm mới", new { @class = "control-label" })
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane" id="productImage">
                                <input class="btn btn-sm btn-outline-success mb-4" id="butonUPloadImage" type="button" value="Tải ảnh" />
                                <table class="table table-hover" id="tbProductImage">
                                    <thead>
                                        <tr role="row">
                                            <th class="text-center">No.</th>
                                            <th class="text-center">Hình ảnh</th>
                                            <th class="text-center">Ảnh chính</th>
                                            <th class="text-center"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableImage">
                                        @if (Model.images_product != null && Model.images_product.Any())
                                        {
                                            var i = 1;
                                            foreach (var image in Model.images_product.OrderBy(x => x.created).ToList())
                                            {
                                                <tr id="rowId_@image.id">
                                                    <td class="text-center">@i</td>
                                                    <td class="text-center"><img width="100" src="@image.image" /><input type="hidden" value="@image.image" id="imagesInput" name="Images" /></td>
                                                    <td class="text-center"><input type="radio" value="@image.id" name="DefaulImage" id="defaultImage" checked="@image.isDefault" } /></td>
                                                    <td class="text-center"><a href="#" data-id="@image.id" class="btn btn-sm btn-outline-danger buton-delete-image">Xoá</a></td>
                                                </tr>
                                                i++;
                                            }
                                        }
                                        else
                                        {
                                            <tr class="even">
                                                <td colspan="4">Không có bản ghi!</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group mt-2">
                <div class="col-md-offset-10 col-md-10 flex-row d-flex justify-content-end align-items-center">
                    <div>
                        @Html.ActionLink("Trở lại", "quan-ly-san-pham", "admin", new { area = "" }, null)
                    </div>

                    <button type="submit" value="Edit" class="btn btn-primary ml-4">
                        Lưu thay đổi
                    </button>
                </div>
            </div>
        </div>
    }

    <!-- Bootstrap core JavaScript-->
    <script src="~/Content/vendor/jquery/jquery.min.js"></script>

    <script src="~/Content/js/admin/product-management.js"></script>
</body>
